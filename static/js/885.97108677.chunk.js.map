{"version":3,"file":"static/js/885.97108677.chunk.js","mappings":"2KAGA,MAgJA,EAhJoDA,IAAkB,IAAjB,QAAEC,GAASD,EAC9D,MAAM,WAAEE,IAAeC,EAAAA,EAAAA,MAChBC,EAAiBC,IAAsBC,EAAAA,EAAAA,WAAS,IAE9CC,EAAKC,IAAUF,EAAAA,EAAAA,UAAS,KACxBG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAuC,CAACK,MAAM,EAAGC,MAAM,MAiB7E,KAAEC,EAAI,MAAEC,EAAK,UAAEC,IAAcC,EAAAA,EAAAA,MAC5BC,EAASC,IAAcZ,EAAAA,EAAAA,WAAS,IAChCa,EAAWC,IAAgBd,EAAAA,EAAAA,UAA4B,KACvDe,EAAUC,IAAehB,EAAAA,EAAAA,UAAS,IAClCiB,EAAaC,IAAkBlB,EAAAA,EAAAA,UAAS,CAACmB,KAAK,GAAIC,OAAO,GAAIC,SAAS,GAAIC,IAAI,MAC9EC,EAAUC,IAAexB,EAAAA,EAAAA,UAAS,CAACyB,IAAI,GAAIN,KAAK,KAGjDO,EAAclB,GAAS,GADK,QAAdK,EAAsB,GAAM,IACCV,EAAME,MACjDsB,EAA6B,WAAdd,EAAyBa,EAAaX,EAAWW,EA0BtE,OAAIf,GAEAiB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mEAAkEC,SAAA,EAC/EC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,yCAAwCC,SAAC,wBACvDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SAAC,uCAClCC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kCAAiCC,SAAC,6CAKtDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uDAAsDC,SAAA,EACnEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,oDAAmDC,SAAC,sBAClEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,OAAMC,SACjBvB,EAAKyB,IAAIC,IACRL,EAAAA,EAAAA,MAAA,MAA0BC,UAAU,4BAA2BC,SAAA,EAC7DF,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAOG,EAAKC,QAAQC,MAAM,KAAGF,EAAKG,aAClCR,EAAAA,EAAAA,MAAA,QAAMC,UAAU,0BAAyBC,SAAA,CAAC,OAAKG,EAAKC,QAAQG,MAAQJ,EAAKG,UAAUE,QAAQ,QAFpFL,EAAKC,QAAQK,QAM1BX,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDC,SAAA,CAAC,aAAWtB,EAAMgC,eAAe,QAAS,CAACC,sBAAsB,OAClH,QAAd5B,IACCe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CC,SAAA,CAAC,2BAA+B,GAANtB,GAAWgC,eAAe,QAAS,CAACC,sBAAsB,IAAI,OAElJtC,EAAMG,QACLsB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CC,SAAA,CAAC,UAAwB,IAAhB3B,EAAME,MAAc,YAAQ,MAAAqC,OAASvC,EAAME,MAAMmC,eAAe,QAAS,CAACC,sBAAsB,KAAM,aAAWtC,EAAMG,UAE3LsB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDC,SAAA,CAAC,mBAAiBJ,EAAWc,eAAe,QAAS,CAACC,sBAAsB,OAC7H,WAAd5B,IACCe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8CAA6CC,SAAA,CAAC,iBAAef,EAAS,WAASY,EAAaa,eAAe,QAAS,CAACC,sBAAsB,QAE5Jb,EAAAA,EAAAA,MAAA,QAAMe,SAvDcC,IACtBA,EAAEC,iBACF9C,GAAmB,IAqDe8B,UAAU,2BAA0BC,SAAA,EAClEC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,0BAAyBC,SAAC,qBAC3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,SAAOe,KAAK,OAAOC,YAAY,iBAAiBC,MAAO/C,EAAKgD,SAAUL,GAAG1C,EAAO0C,EAAEM,OAAOF,OAAQnB,UAAU,gCAAgCsB,UAAW,KACtJpB,EAAAA,EAAAA,KAAA,UAAQe,KAAK,SAASjB,UAAU,2CAA2CuB,QAASA,IApFnEC,KACrB,IAAIhD,EAAQ,GACRC,EAAQ,kBACR,iBAAiBgD,KAAKD,KACpB3B,GAAc,KAChBrB,EAAQ,EACRC,EAAQ,mBACC+C,EAASE,WAAW,QAC7BlD,EAAQ,GACRC,EAAQ,oBAGZF,EAAS,CAACC,QAAOC,WAwE2EkD,CAAcvD,GAAK6B,SAAC,gBAE7G3B,EAAMG,QACLsB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2BAA0BC,SAAA,CAAC,UAAwB,IAAhB3B,EAAME,MAAc,YAAQ,MAAAqC,OAASvC,EAAME,MAAMmC,eAAe,QAAS,CAACC,sBAAsB,KAAM,aAAWtC,EAAMG,UAE3KyB,EAAAA,EAAAA,KAAA,SAAOF,UAAU,0BAAyBC,SAAC,mCAC3CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,UAAQe,KAAK,SAASjB,UAAS,sCAAAa,OAAoD,QAAZ7B,EAAkB,gCAAgC,+BAAiCuC,QAASA,IAAItC,EAAa,OAAOgB,SAAC,gBAC5LC,EAAAA,EAAAA,KAAA,UAAQe,KAAK,SAASjB,UAAS,sCAAAa,OAAoD,WAAZ7B,EAAqB,8BAA8B,+BAAiCuC,QAASA,IAAItC,EAAa,UAAUgB,SAAC,+BAErL,WAAZjB,IACCe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,gBAAeC,SAAC,wBACjCC,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,oBAAiBC,MAAO/B,EAAYE,KAAM8B,SAAUL,GAAG1B,GAAcwC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGzC,GAAW,IAACE,KAAKyB,EAAEM,OAAOF,SAASnB,UAAU,8BAC/JE,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,yBAAmBC,MAAO/B,EAAYG,OAAQ6B,SAAUL,GAAG1B,GAAcwC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGzC,GAAW,IAACG,OAAOwB,EAAEM,OAAOF,SAASnB,UAAU,8BACrKD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,WAAWC,MAAO/B,EAAYI,SAAU4B,SAAUL,GAAG1B,GAAcwC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGzC,GAAW,IAACI,SAASuB,EAAEM,OAAOF,SAASnB,UAAU,oCACjKE,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,MAAMC,MAAO/B,EAAYK,IAAK2B,SAAUL,GAAG1B,GAAcwC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGzC,GAAW,IAACK,IAAIsB,EAAEM,OAAOF,SAASnB,UAAU,uCAEpJE,EAAAA,EAAAA,KAAA,SAAOF,UAAU,qBAAoBC,SAAC,cACtCC,EAAAA,EAAAA,KAAA,UAAQiB,MAAOjC,EAAUkC,SAAUL,GAAG5B,EAAY2C,OAAOf,EAAEM,OAAOF,QAASnB,UAAU,2BAA0BC,SAC5G,IAAI8B,MAAM,KAAK5B,IAAI,CAAC6B,EAAEC,KAAKlC,EAAAA,EAAAA,MAAA,UAAkBoB,MAAOc,EAAE,EAAEhC,SAAA,CAAEgC,EAAE,EAAE,MAAtBA,EAAE,SAIpC,QAAZjD,IACCe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,gBAAeC,SAAC,kCACjCC,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,MAAMC,MAAOzB,EAASE,IAAKwB,SAAUL,GAAGpB,GAAWkC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGnC,GAAQ,IAACE,IAAImB,EAAEM,OAAOF,SAASnB,UAAU,8BACzIE,EAAAA,EAAAA,KAAA,SAAO0B,UAAQ,EAACX,KAAK,OAAOC,YAAY,gBAAgBC,MAAOzB,EAASJ,KAAM8B,SAAUL,GAAGpB,GAAWkC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGnC,GAAQ,IAACJ,KAAKyB,EAAEM,OAAOF,SAASnB,UAAU,gCAGxJhB,IACCkB,EAAAA,EAAAA,KAAA,UAAQe,KAAK,SAASjB,UAAU,qGAAoGC,SAAC,qBAGtIhC,IACCiC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6EAA4EC,UACzFF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iEAAgEC,SAAA,EAC7EC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,yBAAwBC,SAAC,uBACvCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACxCC,EAAAA,EAAAA,KAAA,UAAQF,UAAU,sDAAsDiB,KAAK,SAASM,QA/FnEW,KAE/BxD,EAAKyD,QAAQ/B,IACXrC,EAAW,CACTkD,KAAM,WACNmB,UAAWhC,EAAKC,QAAQK,GACxBJ,MAAOF,EAAKC,QAAQC,MACpB+B,MAAOjC,EAAKC,QAAQgC,MACpBC,MAAM,IAAIC,MAAOC,cACjBjC,SAAUH,EAAKG,SACfC,MAAOJ,EAAKC,QAAQG,MAAQJ,EAAKG,aAGrCxB,GAAW,GACXH,IACAV,GAAmB,GACnBuE,WAAW3E,EAAS,MA+EgHmC,SAAC,eACzHC,EAAAA,EAAAA,KAAA,UAAQF,UAAU,0CAA0CiB,KAAK,SAASM,QAASA,IAAMrD,GAAmB,GAAO+B,SAAC,2B","sources":["components/Checkout.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { useHistory } from '../context/HistoryContext';\r\nconst Checkout: React.FC<{ onClose: () => void }> = ({ onClose }) => {\r\n  const { addHistory } = useHistory();\r\n  const [confirmCheckout, setConfirmCheckout] = useState(false);\r\n    // Frete\r\n    const [cep, setCep] = useState('');\r\n    const [frete, setFrete] = useState<{valor:number, prazo:string}>({valor:0, prazo:''});\r\n\r\n    // Função para simular frete\r\n    const calcularFrete = (cepValue:string) => {\r\n      let valor = 25;\r\n      let prazo = '5 dias úteis';\r\n      if (/^\\d{5}-?\\d{3}$/.test(cepValue)) {\r\n        if (valorFinal >= 200) {\r\n          valor = 0;\r\n          prazo = '3 dias úteis';\r\n        } else if (cepValue.startsWith('01')) {\r\n          valor = 15;\r\n          prazo = '2 dias úteis';\r\n        }\r\n      }\r\n      setFrete({valor, prazo});\r\n    };\r\n  const { cart, total, clearCart } = useCart();\r\n  const [success, setSuccess] = useState(false);\r\n  const [pagamento, setPagamento] = useState<'pix'|'cartao'|''>('');\r\n  const [parcelas, setParcelas] = useState(1);\r\n  const [dadosCartao, setDadosCartao] = useState({nome:'', numero:'', validade:'', cvv:''});\r\n  const [dadosPix, setDadosPix] = useState({cpf:'', nome:''});\r\n\r\n  const descontoPix = pagamento === 'pix' ? 0.1 : 0;\r\n  const valorFinal = (total * (1 - descontoPix)) + frete.valor;\r\n  const valorParcela = pagamento === 'cartao' ? valorFinal / parcelas : valorFinal;\r\n\r\n  const handleCheckout = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setConfirmCheckout(true);\r\n  };\r\n\r\n  const confirmAndFinishCheckout = () => {\r\n    // Registrar cada item do carrinho como compra no histórico\r\n    cart.forEach(item => {\r\n      addHistory({\r\n        type: 'purchase',\r\n        productId: item.product.id,\r\n        title: item.product.title,\r\n        image: item.product.image,\r\n        date: new Date().toISOString(),\r\n        quantity: item.quantity,\r\n        price: item.product.price * item.quantity\r\n      });\r\n    });\r\n    setSuccess(true);\r\n    clearCart();\r\n    setConfirmCheckout(false);\r\n    setTimeout(onClose, 3000);\r\n  };\r\n\r\n  if (success) {\r\n    return (\r\n      <div className=\"p-8 max-w-md mx-auto bg-white rounded-2xl shadow-2xl text-center\">\r\n        <h2 className=\"text-2xl font-bold text-green-600 mb-4\">Compra finalizada!</h2>\r\n        <p className=\"text-gray-700 mb-2\">Obrigado por comprar na GilStore.</p>\r\n        <span className=\"text-lg font-bold text-blue-700\">Seu pedido está sendo processado.</span>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"p-8 max-w-md mx-auto bg-white rounded-2xl shadow-2xl\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-blue-700 text-center\">Finalizar Compra</h2>\r\n      <ul className=\"mb-4\">\r\n        {cart.map(item => (\r\n          <li key={item.product.id} className=\"flex justify-between mb-2\">\r\n            <span>{item.product.title} x{item.quantity}</span>\r\n            <span className=\"font-bold text-blue-700\">R$ {(item.product.price * item.quantity).toFixed(2)}</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div className=\"mb-2 text-right text-xl font-bold text-blue-700\">Total: R$ {total.toLocaleString('pt-BR', {minimumFractionDigits:2})}</div>\r\n      {pagamento === 'pix' && (\r\n        <div className=\"mb-2 text-right text-green-600 font-bold\">Desconto Pix: -10% (R$ {(total*0.1).toLocaleString('pt-BR', {minimumFractionDigits:2})})</div>\r\n      )}\r\n      {frete.prazo && (\r\n        <div className=\"mb-2 text-right text-green-700 font-bold\">Frete: {frete.valor === 0 ? 'Grátis' : `R$ ${frete.valor.toLocaleString('pt-BR', {minimumFractionDigits:2})}`} | Prazo: {frete.prazo}</div>\r\n      )}\r\n      <div className=\"mb-4 text-right text-xl font-bold text-blue-900\">Valor final: R$ {valorFinal.toLocaleString('pt-BR', {minimumFractionDigits:2})}</div>\r\n      {pagamento === 'cartao' && (\r\n        <div className=\"mb-2 text-right text-blue-700 font-semibold\">Parcelamento: {parcelas}x de R$ {valorParcela.toLocaleString('pt-BR', {minimumFractionDigits:2})}</div>\r\n      )}\r\n      <form onSubmit={handleCheckout} className=\"flex flex-col gap-4 mt-4\">\r\n        <label className=\"font-bold text-gray-700\">Simule o frete:</label>\r\n        <div className=\"flex gap-2 items-center\">\r\n          <input type=\"text\" placeholder=\"Digite seu CEP\" value={cep} onChange={e=>setCep(e.target.value)} className=\"border rounded px-2 py-1 w-32\" maxLength={9} />\r\n          <button type=\"button\" className=\"bg-blue-500 text-white px-3 py-1 rounded\" onClick={()=>calcularFrete(cep)}>Calcular</button>\r\n        </div>\r\n        {frete.prazo && (\r\n          <div className=\"text-green-700 font-bold\">Frete: {frete.valor === 0 ? 'Grátis' : `R$ ${frete.valor.toLocaleString('pt-BR', {minimumFractionDigits:2})}`} | Prazo: {frete.prazo}</div>\r\n        )}\r\n        <label className=\"font-bold text-gray-700\">Escolha a forma de pagamento:</label>\r\n        <div className=\"flex gap-4\">\r\n          <button type=\"button\" className={`px-4 py-2 rounded font-bold border ${pagamento==='pix'?'bg-green-100 border-green-500':'bg-gray-100 border-gray-300'}`} onClick={()=>setPagamento('pix')}>Pix (-10%)</button>\r\n          <button type=\"button\" className={`px-4 py-2 rounded font-bold border ${pagamento==='cartao'?'bg-blue-100 border-blue-500':'bg-gray-100 border-gray-300'}`} onClick={()=>setPagamento('cartao')}>Cartão de Crédito</button>\r\n        </div>\r\n        {pagamento==='cartao' && (\r\n          <div className=\"flex flex-col gap-2\">\r\n            <label className=\"font-semibold\">Dados do Cartão</label>\r\n            <input required type=\"text\" placeholder=\"Nome no cartão\" value={dadosCartao.nome} onChange={e=>setDadosCartao({...dadosCartao,nome:e.target.value})} className=\"border rounded px-2 py-1\" />\r\n            <input required type=\"text\" placeholder=\"Número do cartão\" value={dadosCartao.numero} onChange={e=>setDadosCartao({...dadosCartao,numero:e.target.value})} className=\"border rounded px-2 py-1\" />\r\n            <div className=\"flex gap-2\">\r\n              <input required type=\"text\" placeholder=\"Validade\" value={dadosCartao.validade} onChange={e=>setDadosCartao({...dadosCartao,validade:e.target.value})} className=\"border rounded px-2 py-1 w-1/2\" />\r\n              <input required type=\"text\" placeholder=\"CVV\" value={dadosCartao.cvv} onChange={e=>setDadosCartao({...dadosCartao,cvv:e.target.value})} className=\"border rounded px-2 py-1 w-1/2\" />\r\n            </div>\r\n            <label className=\"font-semibold mt-2\">Parcelas</label>\r\n            <select value={parcelas} onChange={e=>setParcelas(Number(e.target.value))} className=\"border rounded px-2 py-1\">\r\n              {[...Array(12)].map((_,i)=>(<option key={i+1} value={i+1}>{i+1}x</option>))}\r\n            </select>\r\n          </div>\r\n        )}\r\n        {pagamento==='pix' && (\r\n          <div className=\"flex flex-col gap-2\">\r\n            <label className=\"font-semibold\">Dados para pagamento via Pix</label>\r\n            <input required type=\"text\" placeholder=\"CPF\" value={dadosPix.cpf} onChange={e=>setDadosPix({...dadosPix,cpf:e.target.value})} className=\"border rounded px-2 py-1\" />\r\n            <input required type=\"text\" placeholder=\"Nome completo\" value={dadosPix.nome} onChange={e=>setDadosPix({...dadosPix,nome:e.target.value})} className=\"border rounded px-2 py-1\" />\r\n          </div>\r\n        )}\r\n        {pagamento && (\r\n          <button type=\"submit\" className=\"w-full bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow hover:bg-green-600 transition\">Confirmar Compra</button>\r\n        )}\r\n        {/* Modal de confirmação de compra */}\r\n        {confirmCheckout && (\r\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40\">\r\n            <div className=\"bg-white rounded-xl shadow-2xl p-6 w-full max-w-xs text-center\">\r\n              <h3 className=\"text-lg font-bold mb-4\">Finalizar compra?</h3>\r\n              <div className=\"flex gap-4 justify-center\">\r\n                <button className=\"bg-green-500 text-white px-4 py-2 rounded font-bold\" type=\"button\" onClick={confirmAndFinishCheckout}>Confirmar</button>\r\n                <button className=\"bg-gray-200 px-4 py-2 rounded font-bold\" type=\"button\" onClick={() => setConfirmCheckout(false)}>Cancelar</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;"],"names":["_ref","onClose","addHistory","useHistory","confirmCheckout","setConfirmCheckout","useState","cep","setCep","frete","setFrete","valor","prazo","cart","total","clearCart","useCart","success","setSuccess","pagamento","setPagamento","parcelas","setParcelas","dadosCartao","setDadosCartao","nome","numero","validade","cvv","dadosPix","setDadosPix","cpf","valorFinal","valorParcela","_jsxs","className","children","_jsx","map","item","product","title","quantity","price","toFixed","id","toLocaleString","minimumFractionDigits","concat","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","maxLength","onClick","cepValue","test","startsWith","calcularFrete","required","_objectSpread","Number","Array","_","i","confirmAndFinishCheckout","forEach","productId","image","date","Date","toISOString","setTimeout"],"ignoreList":[],"sourceRoot":""}