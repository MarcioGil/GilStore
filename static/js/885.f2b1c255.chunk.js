"use strict";(self.webpackChunkquikk1=self.webpackChunkquikk1||[]).push([[885],{885:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(555),l=a(43),o=a(513),s=a(291),n=a(41),i=a(579);const d=e=>{let{onClose:t}=e;const{addHistory:a}=(0,n.W)(),[d,c]=(0,l.useState)(!1),[x,u]=(0,l.useState)(""),[p,m]=(0,l.useState)({valor:0,prazo:""}),{cart:b,total:g,clearCart:h}=(0,o._)(),[f,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(""),[N,C]=(0,l.useState)(1),[w,S]=(0,l.useState)({nome:"",numero:"",validade:"",cvv:""}),[k,q]=(0,l.useState)({cpf:"",nome:""}),A=g*(1-("pix"===y?.1:0))+p.valor,D="cartao"===y?A/N:A;return f?(0,i.jsxs)("div",{className:"p-8 max-w-md mx-auto bg-white rounded-2xl shadow-2xl text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-4",children:"Compra finalizada!"}),(0,i.jsx)("p",{className:"text-gray-700 mb-2",children:"Obrigado por comprar na GilStore."}),(0,i.jsx)("span",{className:"text-lg font-bold text-blue-700",children:"Seu pedido est\xe1 sendo processado."})]}):(0,i.jsxs)("div",{className:"p-8 max-w-md mx-auto bg-white rounded-2xl shadow-2xl",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700 text-center",children:"Finalizar Compra"}),(0,i.jsx)("ul",{className:"mb-4",children:b.map(e=>(0,i.jsxs)("li",{className:"flex justify-between mb-2",children:[(0,i.jsxs)("span",{children:[e.product.title," x",e.quantity]}),(0,i.jsxs)("span",{className:"font-bold text-blue-700",children:["R$ ",(e.product.price*e.quantity).toFixed(2)]})]},e.product.id))}),(0,i.jsxs)("div",{className:"mb-2 text-right text-xl font-bold text-blue-700",children:["Total: R$ ",g.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),"pix"===y&&(0,i.jsxs)("div",{className:"mb-2 text-right text-green-600 font-bold",children:["Desconto Pix: -10% (R$ ",(.1*g).toLocaleString("pt-BR",{minimumFractionDigits:2}),")"]}),p.prazo&&(0,i.jsxs)("div",{className:"mb-2 text-right text-green-700 font-bold",children:["Frete: ",0===p.valor?"Gr\xe1tis":"R$ ".concat(p.valor.toLocaleString("pt-BR",{minimumFractionDigits:2}))," | Prazo: ",p.prazo]}),(0,i.jsxs)("div",{className:"mb-4 text-right text-xl font-bold text-blue-900",children:["Valor final: R$ ",A.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),"cartao"===y&&(0,i.jsxs)("div",{className:"mb-2 text-right text-blue-700 font-semibold",children:["Parcelamento: ",N,"x de R$ ",D.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(!0)},className:"flex flex-col gap-4 mt-4",children:[(0,i.jsx)("label",{className:"font-bold text-gray-700",children:"Simule o frete:"}),(0,i.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,i.jsx)("input",{type:"text",placeholder:"Digite seu CEP",value:x,onChange:e=>u(e.target.value),className:"border rounded px-2 py-1 w-32",maxLength:9}),(0,i.jsx)("button",{type:"button",className:"bg-blue-500 text-white px-3 py-1 rounded",onClick:()=>(e=>{let t=25,a="5 dias \xfateis";/^\d{5}-?\d{3}$/.test(e)&&(A>=200?(t=0,a="3 dias \xfateis"):e.startsWith("01")&&(t=15,a="2 dias \xfateis")),m({valor:t,prazo:a})})(x),children:"Calcular"})]}),p.prazo&&(0,i.jsxs)("div",{className:"text-green-700 font-bold",children:["Frete: ",0===p.valor?"Gr\xe1tis":"R$ ".concat(p.valor.toLocaleString("pt-BR",{minimumFractionDigits:2}))," | Prazo: ",p.prazo]}),(0,i.jsx)("label",{className:"font-bold text-gray-700",children:"Escolha a forma de pagamento:"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{type:"button",className:"px-4 py-2 rounded font-bold border ".concat("pix"===y?"bg-green-100 border-green-500":"bg-gray-100 border-gray-300"),onClick:()=>j("pix"),children:"Pix (-10%)"}),(0,i.jsx)("button",{type:"button",className:"px-4 py-2 rounded font-bold border ".concat("cartao"===y?"bg-blue-100 border-blue-500":"bg-gray-100 border-gray-300"),onClick:()=>j("cartao"),children:"Cart\xe3o de Cr\xe9dito"})]}),"cartao"===y&&(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Dados do Cart\xe3o"}),(0,i.jsx)("input",{required:!0,type:"text",placeholder:"Nome no cart\xe3o",value:w.nome,onChange:e=>S((0,r.A)((0,r.A)({},w),{},{nome:e.target.value})),className:"border rounded px-2 py-1"}),(0,i.jsx)("input",{required:!0,type:"text",placeholder:"N\xfamero do cart\xe3o",value:w.numero,onChange:e=>S((0,r.A)((0,r.A)({},w),{},{numero:e.target.value})),className:"border rounded px-2 py-1"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("input",{required:!0,type:"text",placeholder:"Validade",value:w.validade,onChange:e=>S((0,r.A)((0,r.A)({},w),{},{validade:e.target.value})),className:"border rounded px-2 py-1 w-1/2"}),(0,i.jsx)("input",{required:!0,type:"text",placeholder:"CVV",value:w.cvv,onChange:e=>S((0,r.A)((0,r.A)({},w),{},{cvv:e.target.value})),className:"border rounded px-2 py-1 w-1/2"})]}),(0,i.jsx)("label",{className:"font-semibold mt-2",children:"Parcelas"}),(0,i.jsx)("select",{value:N,onChange:e=>C(Number(e.target.value)),className:"border rounded px-2 py-1",children:[...Array(12)].map((e,t)=>(0,i.jsxs)("option",{value:t+1,children:[t+1,"x"]},t+1))})]}),"pix"===y&&(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"font-semibold",children:"Dados para pagamento via Pix"}),(0,i.jsx)("input",{required:!0,type:"text",placeholder:"CPF",value:k.cpf,onChange:e=>q((0,r.A)((0,r.A)({},k),{},{cpf:e.target.value})),className:"border rounded px-2 py-1"}),(0,i.jsx)("input",{required:!0,type:"text",placeholder:"Nome completo",value:k.nome,onChange:e=>q((0,r.A)((0,r.A)({},k),{},{nome:e.target.value})),className:"border rounded px-2 py-1"})]}),y&&(0,i.jsx)("button",{type:"submit",className:"w-full bg-green-500 text-white px-6 py-3 rounded-lg font-bold shadow hover:bg-green-600 transition",children:"Confirmar Compra"}),d&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-xs text-center",children:[(0,i.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Finalizar compra?"}),(0,i.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,i.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded font-bold",type:"button",onClick:async()=>{for(const t of b)if(a({type:"purchase",productId:t.product.id,title:t.product.title,image:t.product.image,date:(new Date).toISOString(),quantity:t.quantity,price:t.product.price*t.quantity}),"number"===typeof t.product.stock){const a=Math.max(0,t.product.stock-t.quantity);try{await(0,s.D8)(t.product.id,a)}catch(e){}}v(!0),h(),c(!1),setTimeout(t,3e3)},children:"Confirmar"}),(0,i.jsx)("button",{className:"bg-gray-200 px-4 py-2 rounded font-bold",type:"button",onClick:()=>c(!1),children:"Cancelar"})]})]})})]})]})}}}]);
//# sourceMappingURL=885.f2b1c255.chunk.js.map